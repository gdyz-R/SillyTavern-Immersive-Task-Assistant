# SillyTavern 沉浸式任务助手 v1.0

## 📖 这个项目能做什么？

**SillyTavern 沉浸式任务助手** 是一套能将你的任务清单（例如学习、编程、写作）与 AI 角色扮演无缝融合的自动化工具

它解决了核心痛点：**如何在不破坏聊天沉浸感的前提下，引入一个可管理、可追踪的任务流程**

#### **核心功能**

*   **🤖 任务驱动的角色扮演**
    在与 AI 伙伴聊天时，你可以通过简单的命令，让它发布你预设的学习或工作任务

*   **🧠 智能化的主动提醒**
    AI 会像一个真正的伙伴一样，在你的电脑桌面上弹出通知，以角色的口吻提醒你“该回来学习啦！”

*   **😌 自然且无干扰**
    *   **懂你何时忙碌**: AI 会在你设定的“繁忙时间”（如会议、上课）保持安静
    *   **知你是否在电脑前**: 只在你活跃使用电脑时发送提醒，避免无效打扰
    *   **拒绝机械重复**: 提醒时机由智能算法驱动，感觉更自然，而非固定的闹钟

*   **🧩 高度结构化的 AI 输出**
    AI 的回答会被规范为固定的格式（如思考、代码、解释），便于你清晰地获取所需信息

---

## 🚀 安装与配置

我们提供一键式安装脚本，帮助你快速完成所有配置

### **1. 一键安装 (Windows 推荐)**

> 适合所有用户，只需双击一次即可完成全部安装

1.  从项目页面下载 ZIP 压缩包并解压
2.  进入解压后的文件夹，找到并双击运行 `install.bat` 脚本
3.  根据提示，**重启电脑**以完成所有设置

安装脚本会自动完成依赖安装和开机启动项的配置

### **2. 核心配置**

重启电脑后，进行以下关键步骤，将项目与你的 SillyTavern 连接起来

*   **第一步：配置 AI 角色**
    打开 SillyTavern，导入项目文件中提供的 `Character Card.json` 作为你的 AI 任务伙伴
*   **第二步：配置 AI 行为 (Prompt)**
    *   进入 SillyTavern 的 **“对话补全预设”** 设置
    *   选择你当前使用的预设文件，点击编辑
    *   导入本项目 `prompts/core.json` 文件中的内容作为破限模块，这会告诉 AI 如何根据任务进行结构化思考和回应
*   **第三步 (重要)：设置你的繁忙时间**
    *   为了避免在不合时宜的时候被打扰，你需要告诉 AI 你何时忙碌
    *   打开项目目录下的 `schedule.jsonl` 文件
    *   在其中添加你的固定繁忙时段
    *   这里的实现方式是对应每天的时段，可以改为固定时间每天重复，但是需要修改noticer.py代码


---

## 🎮 如何使用

安装和配置完成后，`notifier.py` (智能提醒服务) 已在后台自动运行你只需要通过 `director.py` (导演脚本) 来管理任务

1.  在项目文件夹的空白处，按住 `Shift` 并单击鼠标右键，选择 **“在此处打开 Powershell 窗口”** 或 **“在终端中打开”**

2.  输入以下命令启动导演脚本：
    ```bash
    python director.py
    ```

3.  脚本启动后，使用以下命令与系统交互：

    *   `/start`  — **绑定会话**: 将导演脚本与你当前的 SillyTavern 聊天会话绑定
    *   `/next`    — **注入任务**: 发布下一个任务
    *   `/retry`   — **重新注入**: 重新发送当前任务
    *   `/status`  — **查看进度**: 显示当前的任务进度
    *   `/reset`   — **重置进度**: 清空所有任务进度，从头开始
    *   `/exit`    — **退出脚本**: 关闭导演脚本
    
    **现在`problems.json`中的内容为leetcode所有easy难度题目**

---

## 📦 自定义你的任务库

你可以轻松创建属于自己的任务清单，无论是编程题、写作灵感还是学习计划

*   **唯一需要修改的文件是 `problems.json`**
*   每个任务都是一个独立的 JSON 对象，包含三个字段：`id`, `title`, `content`

👉 **想了解更高级的玩法？请查阅我们的 [二次开发与自定义指南](CUSTOMIZATION.md)**

---

## 🛠️ 未来计划 (v1.0 Roadmap)

*   **插件化**: 将导演脚本制作成 SillyTavern 原生插件，无需额外打开命令行窗口
*   **图形化界面 (GUI)**: 提供一个图形界面来替代手动编辑 JSON 文件
*   **跨平台支持**: 为 macOS 和 Linux 系统增加桌面通知功能
*   **动态任务源**: 支持从网络 API（如 LeetCode）每日自动获取新任务
*   **模块化 Prompt**: 允许用户更自由地替换角色的性格人设，同时保留任务功能

---

## ⚙️ 系统工作原理 (核心模块解析)

本系统由三个核心模块协同工作，提供一种结构化任务与沉浸式体验并存的**双轨互动模式**

### **1. 导演脚本 (`director.py`)**

> **定位**: 任务管理与注入引擎

*   **做什么**:
    *   读取 `problems.json` 中的任务库
    *   通过 `progress.json` 文件追踪并保存你的任务进度
    *   将任务内容作为你的发言，精确写入 SillyTavern 的聊天记录中

### **2. 智能伴侣服务 (`notifier.py`)**

> **定位**: 情景感知与主动通知服务

*   **做什么**:
    *   在操作系统后台静默运行
    *   读取 `schedule.jsonl` 来识别你的“繁忙”时段，并在此时保持安静
    *   监测你是否在电脑前，只在活跃时发送通知
    *   基于**韦伯分布统计模型**，以一种自然的、非机械的方式决定何时发送提醒

### **3. AI 行为协议 (Prompt 框架)**

> **定位**: AI 行为与输出格式的规则集

*   **做什么**:
    *   将一个通用的大语言模型，约束为一个专注于解决问题的**任务执行单元**
    *   强制 AI 的回复遵循特定的任务要求
    *   在施加严格约束的同时，也为人设保留了空间，允许 AI 在解释时使用自己的性格和语气

---

## 📚 附录：手动安装步骤

如果一键安装失败，或你希望手动控制安装过程，请遵循以下步骤

1.  **获取项目文件**
    *   在项目页面点击 `Code` → `Download ZIP`
    *   解压到你希望存放的任意目录

2.  **安装依赖**
    *   打开终端或命令行，进入项目目录
    *   运行命令: `pip install -r requirements.txt`

3.  **配置开机启动**
    *   在项目目录的终端中，运行命令: `python setup_autostart.py`

4.  **配置 SillyTavern**
    *   参照上文 **“核心配置”** 部分的指引，完成角色卡和 Prompt 的导入

---

## 🙌 致谢

感谢使用本项目！如果你有任何问题或改进建议，欢迎在项目页面提交 Issue 或 Pull Request